import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as p,e as i,w as e,r as c,o as m,a as n,d as s}from"./app-7vCtLRjQ.js";const k={};function h(v,a){const r=c("CodeTabs"),l=c("Tabs");return m(),d("div",null,[a[24]||(a[24]=p('<p>Stone.js offers a powerful and unified command system made of two complementary parts:</p><ul><li><strong>The Stone CLI</strong>, which provides built-in commands like <code>serve</code>, <code>build</code>, or <code>init</code>, and helps automate development workflows across all types of Stone.js projects.</li><li><strong>Custom Commands</strong>, which let you define your own CLI commands directly in your application, turning any Stone.js app into a fully functional CLI tool.</li></ul><p>With this system, you can run, build, scaffold, or extend your projects, and even publish your own CLI tools, using the same familiar Stone.js architecture.</p><h3 id="why-it-exists" tabindex="-1"><a class="header-anchor" href="#why-it-exists"><span>Why It Exists</span></a></h3><p>CLI tools are essential in any developer’s workflow. Instead of reinventing the wheel for each tool, Stone.js lets you:</p><ul><li>Use one consistent, event-driven system to handle CLI input/output.</li><li>Write CLI commands just like you would write HTTP handlers or frontend page handlers.</li><li>Reuse your application logic, services, and configuration across all execution modes (web, serverless, CLI).</li></ul><p>The goal is clear: <strong>one continuum, one skillset</strong>, from server to script.</p><h3 id="where-it-fits-in-the-continuum" tabindex="-1"><a class="header-anchor" href="#where-it-fits-in-the-continuum"><span>Where It Fits in the Continuum</span></a></h3><p>In the Continuum Architecture:</p><ul><li>CLI commands are triggered from the <strong>Integration dimension</strong> via the <strong>CLI adapter</strong>.</li><li>This produces an <code>IncomingEvent</code>, just like HTTP, browser or Lambda triggers.</li><li>Your event handler (in the <strong>Functional dimension</strong>) processes the intention and returns a response, or just prints it to the console.</li></ul><p>Whether you&#39;re writing a complex admin tool or a quick script, you&#39;re still operating inside the same contextual flow as the rest of your Stone.js app.</p><h2 id="stone-cli" tabindex="-1"><a class="header-anchor" href="#stone-cli"><span>Stone CLI</span></a></h2><p>The <strong>Stone CLI</strong> is the official command-line tool for Stone.js. It helps you bootstrap new projects, run development servers, build production bundles, and export third-party configurations, all from a single entry point.</p><p>Stone CLI comes preinstalled in every Stone.js project, but to unlock its full potential, you should install it globally on your machine.</p><p>It offers a consistent, developer-friendly interface to perform essential tasks across all environments, whether you&#39;re building a backend API, frontend app, fullstack project, or CLI tool.</p><h3 id="installation" tabindex="-1"><a class="header-anchor" href="#installation"><span>Installation</span></a></h3><h4 id="global-installation-recommended" tabindex="-1"><a class="header-anchor" href="#global-installation-recommended"><span>Global Installation (Recommended)</span></a></h4><p>To use the Stone CLI everywhere from your terminal, install it globally from the npm registry:</p>',18)),i(r,{data:[{id:"npm"},{id:"yarn"},{id:"pnpm"}],active:0,"tab-id":"shell"},{title0:e(({value:t,isActive:o})=>a[0]||(a[0]=[s("npm")])),title1:e(({value:t,isActive:o})=>a[1]||(a[1]=[s("yarn")])),title2:e(({value:t,isActive:o})=>a[2]||(a[2]=[s("pnpm")])),tab0:e(({value:t,isActive:o})=>a[3]||(a[3]=[n("div",{class:"language-bash line-numbers-mode","data-highlighter":"prismjs","data-ext":"sh"},[n("pre",null,[n("code",{class:"language-bash"},[n("span",{class:"line"},[n("span",{class:"token function"},"npm"),s(" i "),n("span",{class:"token parameter variable"},"-g"),s(" @stone-js/cli")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"})])],-1)])),tab1:e(({value:t,isActive:o})=>a[4]||(a[4]=[n("div",{class:"language-bash line-numbers-mode","data-highlighter":"prismjs","data-ext":"sh"},[n("pre",null,[n("code",{class:"language-bash"},[n("span",{class:"line"},[n("span",{class:"token function"},"yarn"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-g"),s(" @stone-js/cli")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"})])],-1)])),tab2:e(({value:t,isActive:o})=>a[5]||(a[5]=[n("div",{class:"language-bash line-numbers-mode","data-highlighter":"prismjs","data-ext":"sh"},[n("pre",null,[n("code",{class:"language-bash"},[n("span",{class:"line"},[n("span",{class:"token function"},"pnpm"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-g"),s(" @stone-js/cli")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"})])],-1)])),_:1}),a[25]||(a[25]=p(`<h4 id="local-usage" tabindex="-1"><a class="header-anchor" href="#local-usage"><span>Local Usage</span></a></h4><p>If you prefer not to install globally, you can still use the CLI in a local project via <code>npx</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">npx stone</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="built-in-commands" tabindex="-1"><a class="header-anchor" href="#built-in-commands"><span>Built-in Commands</span></a></h3><p>Once installed, you can view all available built-in commands using:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone <span class="token parameter variable">--help</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Each command also has its own help screen:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone <span class="token builtin class-name">export</span> <span class="token parameter variable">--help</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="main-commands" tabindex="-1"><a class="header-anchor" href="#main-commands"><span>Main Commands</span></a></h4><ul><li><p><code>stone serve</code> Start your application in development mode.</p></li><li><p><code>stone build</code> Build your application for production.</p></li><li><p><code>stone preview</code> Preview the production build locally.</p></li><li><p><code>stone init</code> Create a new Stone.js application. A questionnaire will guide you through the setup.</p></li><li><p><code>stone export</code> Export preconfigured settings for third-party libraries. Example:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone <span class="token builtin class-name">export</span> rollup</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><code>stone typings</code> Perform static type validation for TypeScript projects.</p></li><li><p><code>stone cache-clear</code> Clear internal cache, useful during development.</p></li><li><p><code>stone list</code> List all available custom commands, including your custom ones and those provided by third-party libraries.</p></li><li><p><code>stone --version</code> Show the current version of the Stone CLI.</p></li></ul><h2 id="custom-commands" tabindex="-1"><a class="header-anchor" href="#custom-commands"><span>Custom Commands</span></a></h2><p>In addition to built-in commands, Stone.js lets you create your own custom commands.</p><p>A <strong>custom command</strong> is an event handler designed to respond to a CLI-triggered <code>IncomingEvent</code>. You write it just like you would write an HTTP event handler or a browser event handler, same shape, same lifecycle, same power.</p><p>Not only can you build your own CLI tools, but third-party libraries can also expose their own custom commands. This makes the Stone CLI ecosystem modular, extensible, and highly adaptable to real-world project needs.</p><h3 id="cli-adapter-installation" tabindex="-1"><a class="header-anchor" href="#cli-adapter-installation"><span>CLI Adapter Installation</span></a></h3><p>To run your custom commands, you’ll need to install the CLI adapter package:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> i @stone-js/node-cli-adapter</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Important, this adapter is <strong>not</strong> the same as <code>@stone-js/cli</code>.</p><ul><li><code>@stone-js/cli</code> is the command orchestrator. It launches your app, parses the CLI input, and wires up the system.</li><li><code>@stone-js/node-cli-adapter</code> is what allows your application to receive command events and act on them.</li></ul><p>The CLI tool talks to your app through the CLI adapter. Without it, your custom commands won’t be executed.</p><div class="hint-container tip"><p class="hint-container-title">Fun Fact</p><p>No better demonstration of Stone.js&#39;s power than its own CLI, it was the first application built with Stone.js.<br> Talk about dogfooding!<br> We used Stone.js to build the tool that builds Stone.js apps. 🤓</p></div><h3 id="cli-adapter-activation" tabindex="-1"><a class="header-anchor" href="#cli-adapter-activation"><span>CLI Adapter Activation</span></a></h3><p>Like any other adapter in Stone.js, you must activate the CLI adapter before it can process command line events.</p>`,23)),i(l,{data:[{id:"Declarative"},{id:"Imperative"}],active:0,"tab-id":"declarative-imperative"},{title0:e(({value:t,isActive:o})=>a[6]||(a[6]=[s("Declarative")])),title1:e(({value:t,isActive:o})=>a[7]||(a[7]=[s("Imperative")])),tab0:e(({value:t,isActive:o})=>a[8]||(a[8]=[n("h4",{id:"declarative-activation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#declarative-activation"},[n("span",null,"Declarative Activation")])],-1),n("p",null,[s("You can activate the CLI adapter declaratively, by adding the "),n("code",null,"@NodeConsole()"),s(" decorator to your main application handler.")],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" NodeConsole "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@stone-js/node-cli-adapter'")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" StoneApp"),n("span",{class:"token punctuation"},","),s(" IEventHandler"),n("span",{class:"token punctuation"},","),s(" IncomingEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@stone-js/core'")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"StoneApp")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"NodeConsole")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Application"),s(),n("span",{class:"token keyword"},"implements"),s(),n("span",{class:"token class-name"},[s("IEventHandler"),n("span",{class:"token operator"},"<"),s("IncomingEvent"),n("span",{class:"token operator"},">")]),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// Your code here")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),tab1:e(({value:t,isActive:o})=>a[9]||(a[9]=[n("h4",{id:"imperative-activation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#imperative-activation"},[n("span",null,"Imperative Activation")])],-1),n("p",null,[s("You can activate the CLI adapter imperatively, by adding it's blueprint "),n("code",null,"nodeConsoleAdapterBlueprint"),s(" to your app's configuration.")],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" nodeConsoleAdapterBlueprint "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@stone-js/node-cli-adapter'")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" IncomingEvent"),n("span",{class:"token punctuation"},","),s(" stoneBlueprint"),n("span",{class:"token punctuation"},","),s(" defineEventHandler "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@stone-js/core'")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"Application"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// Your code here")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" AppBlueprint "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"defineBlueprintConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("blueprint"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},"  blueprint"),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("stoneBlueprint"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("nodeConsoleAdapterBlueprint"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"defineEventHandler"),n("span",{class:"token punctuation"},"("),s("Application"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),_:1}),a[26]||(a[26]=p(`<div class="hint-container important"><p class="hint-container-title">Important</p><p>All your global initialization middleware are disabled when your app runs in CLI mode.</p></div><h5 id="fallback" tabindex="-1"><a class="header-anchor" href="#fallback"><span>Fallback</span></a></h5><p>By default, when the CLI adapter is active and no custom command handler is defined, your main application handler will act as a fallback for any command not explicitly defined. This means that if you run a command that doesn&#39;t match any custom command, or you don&#39;t have any custom command defined, the CLI adapter will call your main application handler.</p><p>To avoid this, simply remove the <code>handle</code> method from the main application handler and Stone.js will handle the command as an unrecognized command.</p><h5 id="contextual-decoherence" tabindex="-1"><a class="header-anchor" href="#contextual-decoherence"><span>Contextual decoherence</span></a></h5><p>You can add the CLI adapter to <strong>any existing Stone.js project</strong>, just like any other adapter. Stone.js supports <strong>adapter overlay</strong>, which means you can combine CLI, HTTP, Browser, and more within the same app.</p><p>Thanks to <strong>contextual decoherence</strong>, Stone.js automatically infers the runtime environment and uses the appropriate adapter during execution. Don’t worry, the CLI adapter is automatically stripped out of frontend bundles, since it only applies to backend runtimes.</p><p>If you’re building a mono app, your <code>Application</code> handler can receive events from <strong>any environment</strong>, including CLI input, HTTP requests, cloud functions, or browser app.</p><p>Just activate the adapters you need, and your handler will serve them all.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Browser</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">UseReact</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">NodeHttp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">StoneApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">NodeConsole</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">AwsLambdaHttp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">handle</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IncomingEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>event<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;World&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token operator">:</span> RenderContext<span class="token operator">&lt;</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> ReactNode <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token operator">?.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This React app can now run custom commands and run as a serverless function or as a web app in both Node.js and browser environments, all from the same codebase.</p><h3 id="defining-a-custom-command" tabindex="-1"><a class="header-anchor" href="#defining-a-custom-command"><span>Defining a Custom Command</span></a></h3><p>Stone.js treats every CLI command as an event handler. This means your command can be structured just like a web route or background task, and it will benefit from the same context injection, introspection, and modularity.</p><p>There are <strong>three ways</strong> to define a custom command in Stone.js:</p><ul><li>Class-based</li><li>Function-based</li><li>Factory-based</li></ul><p>You can pick the shape that best suits your needs, from structured applications to one-off utilities.</p><p>No matter which shape you choose, your command handler always receives an <code>IncomingEvent</code> and optionally returns a response.</p>`,17)),i(l,{data:[{id:"Class-based"},{id:"Function-based"},{id:"Factory-based"}],active:0,"tab-id":"class-factory-function"},{title0:e(({value:t,isActive:o})=>a[10]||(a[10]=[s("Class-based")])),title1:e(({value:t,isActive:o})=>a[11]||(a[11]=[s("Function-based")])),title2:e(({value:t,isActive:o})=>a[12]||(a[12]=[s("Factory-based")])),tab0:e(({value:t,isActive:o})=>a[13]||(a[13]=[n("h4",{id:"class-based-command-handler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#class-based-command-handler"},[n("span",null,"Class-based Command Handler")])],-1),n("p",null,"This is the most robust and introspectable shape, recommended for production apps or when using the declarative API.",-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" IncomingEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/core"')]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ICommandHandler "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/node-cli-adapter"')]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"MyCommand"),s(),n("span",{class:"token keyword"},"implements"),s(),n("span",{class:"token class-name"},[s("ICommandHandler"),n("span",{class:"token operator"},"<"),s("IncomingEvent"),n("span",{class:"token operator"},">")]),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// Handle the event here")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),tab1:e(({value:t,isActive:o})=>a[14]||(a[14]=[n("h4",{id:"function-based-command-handler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#function-based-command-handler"},[n("span",null,"Function-based Command Handler")])],-1),n("p",null,"Ideal for small scripts, automation tasks, or single-purpose tools.",-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" IncomingEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/core"')]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" MyCommand "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// Handle CLI input here")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),n("p",null,"Lightweight, testable, and expressive.",-1)])),tab2:e(({value:t,isActive:o})=>a[15]||(a[15]=[n("h4",{id:"factory-based-command-handler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#factory-based-command-handler"},[n("span",null,"Factory-based Command Handler")])],-1),n("p",null,"When you need runtime dependencies from the service container, use a factory.",-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" IContainer"),n("span",{class:"token punctuation"},","),s(" IncomingEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/core"')]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"MyCommand"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("container"),n("span",{class:"token operator"},":"),s(" IContainer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" name "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"get"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"string"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'World'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Hello "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!!"),n("span",{class:"token template-punctuation string"},"`")]),s(),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),n("p",null,"Factory-based commands give you maximum flexibility and seamless access to your internal services.",-1)])),_:1}),a[27]||(a[27]=p('<p>Each shape is valid, and they’re all interoperable. Use the one that matches your command’s complexity, lifecycle, and ecosystem needs.</p><h3 id="registering-the-command-handler" tabindex="-1"><a class="header-anchor" href="#registering-the-command-handler"><span>Registering the Command Handler</span></a></h3><p>Once your command handler is defined, you need to register it so that Stone.js can recognize it and execute it when a matching CLI event occurs.</p><p>Stone.js offers <strong>two registration styles</strong>, depending on how much control you want:</p><ul><li>Declarative API, using the <code>@Command()</code> decorator (for class-based handlers only)</li><li>Imperative API, using <code>defineCommand()</code> (for any shape)</li></ul>',5)),i(l,{data:[{id:"Declarative"},{id:"Imperative"}],active:0,"tab-id":"declarative-imperative"},{title0:e(({value:t,isActive:o})=>a[16]||(a[16]=[s("Declarative")])),title1:e(({value:t,isActive:o})=>a[17]||(a[17]=[s("Imperative")])),tab0:e(({value:t,isActive:o})=>a[18]||(a[18]=[n("h4",{id:"declarative-registration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#declarative-registration"},[n("span",null,"Declarative Registration")])],-1),n("p",null,"This is the most concise and recommended approach for most CLI commands.",-1),n("p",null,[s("You decorate your handler class with "),n("code",null,"@Command"),s(", passing its metadata like name, alias, description, arguments, and options:")],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" IncomingEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/core"')]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ICommandHandler"),n("span",{class:"token punctuation"},","),s(" Command "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@stone-js/node-cli-adapter"')]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Command")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'greet'"),n("span",{class:"token punctuation"},","),s(" desc"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'Say hello to someone'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"GreetCommand"),s(),n("span",{class:"token keyword"},"implements"),s(),n("span",{class:"token class-name"},[s("ICommandHandler"),n("span",{class:"token operator"},"<"),s("IncomingEvent"),n("span",{class:"token operator"},">")]),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" name "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'World'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Hello "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),n("p",null,[s("Once your class is decorated, and your app is bootstrapped with "),n("code",null,"@StoneApp()"),s(", it will be automatically detected and registered at runtime.")],-1)])),tab1:e(({value:t,isActive:o})=>a[19]||(a[19]=[n("h4",{id:"imperative-registration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#imperative-registration"},[n("span",null,"Imperative Registration")])],-1),n("p",null,[s("If you prefer more manual control, or want to use function or factory-based shapes, you can register your commands using "),n("code",null,"defineCommand"),s(".")],-1),n("h6",{id:"function-based-handler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#function-based-handler"},[n("span",null,"Function-based Handler")])],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" defineCommand "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@stone-js/node-cli-adapter'")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"GreetCommand"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Hello from function!'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("blueprint"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"defineCommand"),n("span",{class:"token punctuation"},"("),s("GreetCommand"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'greet'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),n("h6",{id:"factory-based-handler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#factory-based-handler"},[n("span",null,"Factory-based Handler")])],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"GreetCommandFactory"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" name "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'World'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Hello "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("blueprint"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"defineCommand"),n("span",{class:"token punctuation"},"("),s("GreetCommandFactory"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'greet'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),n("p",null,"This mode gives you flexibility for dynamic registration, runtime assembly, or advanced CLI composition.",-1)])),_:1}),a[28]||(a[28]=p(`<p>Once registered, your command handler becomes available to the kernel, and will be executed every time a matching CLI event is received.</p><h3 id="command-signature" tabindex="-1"><a class="header-anchor" href="#command-signature"><span>Command Signature</span></a></h3><p>Stone.js gives you full control over how your CLI commands are defined and invoked, including their names, aliases, descriptions, arguments, and options.</p><p>You can declare the signature through:</p><ul><li>The <code>@Command({...})</code> decorator (declarative)</li><li>The <code>defineCommand(..., options)</code> function (imperative)</li></ul><p>Both approaches support the same set of metadata.</p><h4 id="name" tabindex="-1"><a class="header-anchor" href="#name"><span>Name</span></a></h4><p>Every command needs a unique <code>name</code>. This is the string the user types in the terminal to invoke your command:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone user:list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="alias" tabindex="-1"><a class="header-anchor" href="#alias"><span>Alias</span></a></h4><p>You can define one or more shortcuts using the <code>alias</code> property:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span><span class="token punctuation">,</span> alias<span class="token operator">:</span> <span class="token string">&#39;ul&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone ul</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Multiple aliases can be defined as an array:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span><span class="token punctuation">,</span> alias<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;ul&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;usli&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="description" tabindex="-1"><a class="header-anchor" href="#description"><span>Description</span></a></h4><p>The <code>desc</code> property provides a human-readable explanation of what your command does. It’s shown in the help screen:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span><span class="token punctuation">,</span> desc<span class="token operator">:</span> <span class="token string">&#39;List application users&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone user:list <span class="token parameter variable">--help</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This helps users understand your command’s purpose at a glance.</p><h4 id="arguments" tabindex="-1"><a class="header-anchor" href="#arguments"><span>Arguments</span></a></h4><p>Arguments are positional inputs passed after the command name. You define them using the <code>args</code> property:</p><ul><li>Required arguments are wrapped in angle brackets: <code>&lt;email&gt;</code></li><li>Optional arguments are wrapped in square brackets: <code>[status]</code></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  args<span class="token operator">:</span> <span class="token string">&#39;&lt;email&gt; [status]&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Used like this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone user:list jonh.doe@domain.com active</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Stone.js will throw a helpful error and show the command signature if required arguments are missing.</p><h4 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>Options</span></a></h4><p>Options are named inputs prefixed by <code>--</code>, useful for flags and toggles.</p><p>You define them using the <code>options</code> property. Each key defines an option name and accepts an object of metadata:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Command</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token string">&#39;user:list&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  options<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    admin<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      alias<span class="token operator">:</span> <span class="token string">&#39;ad&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">      describe<span class="token operator">:</span> <span class="token string">&#39;List only admins&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      type<span class="token operator">:</span> <span class="token string">&#39;boolean&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Used like this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone user:list <span class="token parameter variable">--admin</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="supported-option-parameters" tabindex="-1"><a class="header-anchor" href="#supported-option-parameters"><span>Supported Option Parameters</span></a></h4><ul><li><code>alias</code>, shortcut for the option</li><li><code>default</code>, default value if not provided</li><li><code>describe</code>, description shown in help output</li><li><code>type</code>, one of <code>&#39;boolean&#39;</code>, <code>&#39;string&#39;</code>, <code>&#39;number&#39;</code>, etc.</li></ul><p>Stone.js uses <a href="https://yargs.js.org/docs/#api-reference-optionskey-opt" target="_blank" rel="noopener noreferrer">Yargs</a> behind the scenes to parse arguments and options. You can refer to their documentation for even more advanced configurations.</p><h3 id="custom-matching-logic" tabindex="-1"><a class="header-anchor" href="#custom-matching-logic"><span>Custom Matching Logic</span></a></h3><p>Sometimes, you may want more control over which handler responds to a command, especially when multiple handlers are available. Stone.js provides a clean solution for this through the optional <code>match</code> method.</p><p>The <code>match</code> method allows your handler to inspect the <code>IncomingEvent</code> and decide whether it should handle it. This is particularly useful when:</p><ul><li>You have multiple command handlers registered</li><li>You want to filter by arguments, options, or context</li><li>You’re building dynamic CLI tools</li></ul><h4 id="supported-shapes" tabindex="-1"><a class="header-anchor" href="#supported-shapes"><span>Supported Shapes</span></a></h4><ul><li>✅ <strong>Class-based handlers</strong>: just define a <code>match(event)</code> method alongside your <code>handle(event)</code> method.</li><li>✅ <strong>Factory-based handlers</strong>: return an object with both <code>match</code> and <code>handle</code> functions.</li><li>❌ <strong>Function-based handlers</strong>: do not support custom matching. They&#39;re always treated as default handlers for the given command name.</li></ul>`,43)),i(l,{data:[{id:"Class-based"},{id:"Factory-based"}],active:0,"tab-id":"class-factory-function"},{title0:e(({value:t,isActive:o})=>a[20]||(a[20]=[s("Class-based")])),title1:e(({value:t,isActive:o})=>a[21]||(a[21]=[s("Factory-based")])),tab0:e(({value:t,isActive:o})=>a[22]||(a[22]=[n("h4",{id:"example-class-based",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#example-class-based"},[n("span",null,"Example, Class-based")])],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"MyCommand"),s(),n("span",{class:"token keyword"},"implements"),s(),n("span",{class:"token class-name"},[s("ICommandHandler"),n("span",{class:"token operator"},"<"),s("IncomingEvent"),n("span",{class:"token operator"},">")]),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"match"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(" event"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"get"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"string"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'role'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'admin'")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handle"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// Executed only if match returns true")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),tab1:e(({value:t,isActive:o})=>a[23]||(a[23]=[n("h4",{id:"example-factory-based",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#example-factory-based"},[n("span",null,"Example, Factory-based")])],-1),n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",{class:"language-typescript"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"MyCommand"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function-variable function"},"match"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" event"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'env'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'production'"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function-variable function"},"handle"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token operator"},":"),s(" IncomingEvent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      "),n("span",{class:"token comment"},"// Only runs in production")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),_:1}),a[29]||(a[29]=p(`<p>If the <code>match</code> function returns <code>false</code>, Stone.js will skip this handler and continue searching for another match. If no handler matches, the main handler will act as fallback (unless disabled).</p><p>This small function can be the gatekeeper for complex CLI logic, keep it focused and efficient.</p><h3 id="command-input-api" tabindex="-1"><a class="header-anchor" href="#command-input-api"><span>Command Input API</span></a></h3><p>Once your command is running, you’ll want to interact with the user, whether by reading passed arguments and options, or by asking for input dynamically.</p><p>Stone.js provides two powerful tools to help you handle CLI input:</p><ul><li>The <code>IncomingEvent</code> object, which gives you access to parsed arguments and options</li><li>The <code>CommandInput</code> class, which allows interactive user prompts</li></ul><h4 id="accessing-parsed-input" tabindex="-1"><a class="header-anchor" href="#accessing-parsed-input"><span>Accessing Parsed Input</span></a></h4><p>Every command handler receives an <code>IncomingEvent</code> instance. You can use the <code>.get()</code> method to retrieve values by key, whether it&#39;s an argument or an option.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token function">handle</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IncomingEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> email <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;email&#39;</span><span class="token punctuation">)</span>             <span class="token comment">// From args</span></span>
<span class="line">  <span class="token keyword">const</span> status <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;status&#39;</span><span class="token punctuation">)</span>           <span class="token comment">// From args</span></span>
<span class="line">  <span class="token keyword">const</span> isAdmin <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span>           <span class="token comment">// From options</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can also provide a default value as the second argument:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> isAdmin <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> email <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;unknown@stone.dev&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives you a safe, consistent way to extract CLI data.</p><h4 id="prompting-for-input-interactive" tabindex="-1"><a class="header-anchor" href="#prompting-for-input-interactive"><span>Prompting for Input (Interactive)</span></a></h4><p>Stone.js goes further by offering a set of async utilities for interactive input, such as asking questions or requesting confirmation.</p><p>You access these through the <code>CommandInput</code> instance, which is injected into your command via the factory shape or constructor.</p><h6 id="example-with-factory-injection" tabindex="-1"><a class="header-anchor" href="#example-with-factory-injection"><span>Example with Factory Injection</span></a></h6><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CommandInput <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@stone-js/node-cli-adapter&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">askCommand</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> input <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> input<span class="token operator">:</span> CommandInput <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> IncomingEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">&#39;What is your name?&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Welcome </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="prompt-methods" tabindex="-1"><a class="header-anchor" href="#prompt-methods"><span>Prompt Methods</span></a></h4><h6 id="ask" tabindex="-1"><a class="header-anchor" href="#ask"><span>ask</span></a></h6><p>Ask the user for a string input.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">&#39;Provide your email?&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With default value:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">&#39;Provide your email?&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jonh.doe@domain.com&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="asknumber" tabindex="-1"><a class="header-anchor" href="#asknumber"><span>askNumber</span></a></h6><p>Prompt for a numeric input. If the user enters invalid data, the system will re-prompt.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">askNumber</span><span class="token punctuation">(</span><span class="token string">&#39;Your age?&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="secret" tabindex="-1"><a class="header-anchor" href="#secret"><span>secret</span></a></h6><p>Same as <code>ask</code>, but input is hidden (e.g., for passwords):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token string">&#39;Enter your password&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="confirm" tabindex="-1"><a class="header-anchor" href="#confirm"><span>confirm</span></a></h6><p>Ask a yes/no question. Returns <code>true</code> or <code>false</code>.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> confirm <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;Proceed with deployment?&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With default value:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> confirm <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;Proceed?&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="choice" tabindex="-1"><a class="header-anchor" href="#choice"><span>choice</span></a></h6><p>Let the user select from a predefined list of options.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token string">&#39;Choose a color&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;Red&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Green&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Blue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Enable multiple selections by passing <code>true</code> as the fourth argument:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token string">&#39;Pick your favorite&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;Red&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Green&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="editor" tabindex="-1"><a class="header-anchor" href="#editor"><span>editor</span></a></h6><p>Let the user enter a large amount of text in their preferred system editor.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> bio <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">editor</span><span class="token punctuation">(</span><span class="token string">&#39;Your biography?&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With fallback content:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> bio <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">editor</span><span class="token punctuation">(</span><span class="token string">&#39;Your biography?&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;I am a passionate developer.&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Stone.js uses <a href="https://www.npmjs.com/package/prompts" target="_blank" rel="noopener noreferrer">Prompts</a> under the hood to provide these prompts, but you never have to touch it directly.</p><h3 id="command-output-api" tabindex="-1"><a class="header-anchor" href="#command-output-api"><span>Command Output API</span></a></h3><p>When building CLI tools, presenting information clearly is just as important as receiving input. Stone.js offers a rich <code>CommandOutput</code> utility to help you format and display your messages cleanly and efficiently.</p><p>This object is injected into your command the same way as <code>CommandInput</code>, either via the class constructor or factory parameters.</p><h4 id="example-with-factory-injection-1" tabindex="-1"><a class="header-anchor" href="#example-with-factory-injection-1"><span>Example with Factory Injection</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CommandInput<span class="token punctuation">,</span> CommandOutput <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@stone-js/node-cli-adapter&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">greetCommand</span> <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">{</span> input<span class="token punctuation">,</span> output <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> input<span class="token operator">:</span> CommandInput<span class="token punctuation">,</span> output<span class="token operator">:</span> CommandOutput <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> IncomingEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">await</span> input<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">&#39;Your name?&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    output<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="basic-output-methods" tabindex="-1"><a class="header-anchor" href="#basic-output-methods"><span>Basic Output Methods</span></a></h4><h6 id="info" tabindex="-1"><a class="header-anchor" href="#info"><span>info</span></a></h6><p>Display a general message (usually blue):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">output<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#39;Processing complete.&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="warn" tabindex="-1"><a class="header-anchor" href="#warn"><span>warn</span></a></h6><p>Display a warning message (yellow):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">output<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&#39;Some entries were skipped.&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="error" tabindex="-1"><a class="header-anchor" href="#error"><span>error</span></a></h6><p>Display an error message (red):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">output<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Failed to connect to database.&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="succeed" tabindex="-1"><a class="header-anchor" href="#succeed"><span>succeed</span></a></h6><p>Display a success message (green):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">output<span class="token punctuation">.</span><span class="token function">succeed</span><span class="token punctuation">(</span><span class="token string">&#39;All users imported successfully!&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="breakline" tabindex="-1"><a class="header-anchor" href="#breakline"><span>breakLine</span></a></h6><p>Insert a blank line in the terminal:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">output<span class="token punctuation">.</span><span class="token function">breakLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Useful to improve readability between sections.</p><h4 id="advanced-output" tabindex="-1"><a class="header-anchor" href="#advanced-output"><span>Advanced Output</span></a></h4><h6 id="table" tabindex="-1"><a class="header-anchor" href="#table"><span>table</span></a></h6><p>Display tabular data in rows and columns.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Jonh Doe&#39;</span><span class="token punctuation">,</span> email<span class="token operator">:</span> <span class="token string">&#39;jonh.doe@domain.com&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Jane Doe&#39;</span><span class="token punctuation">,</span> email<span class="token operator">:</span> <span class="token string">&#39;jane.doe@domain.com&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">output<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can pass either an array of objects, or a single object, and optionally filter specific columns.</p><h6 id="spin" tabindex="-1"><a class="header-anchor" href="#spin"><span>spin</span></a></h6><p>Start a loading spinner, great for tasks that take time.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> spinner <span class="token operator">=</span> output<span class="token punctuation">.</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token string">&#39;Uploading file...&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Stop the spinner when done:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This gives your commands a polished, responsive feel.</p><h6 id="progressbar" tabindex="-1"><a class="header-anchor" href="#progressbar"><span>progressBar</span></a></h6><p>Display a visual progress bar for iterative tasks.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> progress <span class="token operator">=</span> output<span class="token punctuation">.</span><span class="token function">progressBar</span><span class="token punctuation">(</span><span class="token string">&#39;:bar&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> total<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  progress<span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>progress<span class="token punctuation">.</span>complete<span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Stone.js uses the <a href="https://www.npmjs.com/package/progress" target="_blank" rel="noopener noreferrer"><code>progress</code></a> library under the hood, so you can pass any supported format and options.</p><p>Clear, styled output helps users understand what your CLI is doing, and turns scripts into professional tools.</p><h2 id="extensibility" tabindex="-1"><a class="header-anchor" href="#extensibility"><span>Extensibility</span></a></h2><p>Stone.js was designed to be modular and library-friendly. That means you can not only create your own commands, but also consume commands from third-party packages, or provide them yourself if you’re building reusable libraries.</p><h3 id="third-party-commands" tabindex="-1"><a class="header-anchor" href="#third-party-commands"><span>Third-party Commands</span></a></h3><p>Any third-party library can register its own built-in commands. These commands can be implemented using:</p><ul><li>Class-based handlers</li><li>Factory-based handlers</li><li>Function-based handlers</li></ul><p>They behave just like your own commands and are executed through the same CLI interface. For example:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">stone router list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This command could come from an external library that provides routing features, and it will be seamlessly available in your CLI once the library is activated.</p><h3 id="registration-requirements" tabindex="-1"><a class="header-anchor" href="#registration-requirements"><span>Registration Requirements</span></a></h3><p>Third-party commands <strong>must</strong> use the <strong>Imperative API</strong> for registration.</p><p>Why? Because commands are attached to the CLI adapter, and the adapter is only resolved at runtime. This means the command registration must be dynamic, during the blueprint resolution phase.</p><p>Libraries do this by registering a <strong>Blueprint Middleware</strong>, which adds their command definitions when the current platform is <code>node-console</code>.</p><h3 id="example-router-command-from-a-third-party-library" tabindex="-1"><a class="header-anchor" href="#example-router-command-from-a-third-party-library"><span>Example: Router Command from a Third-party Library</span></a></h3><h4 id="step-1-define-command-options-and-handler" tabindex="-1"><a class="header-anchor" href="#step-1-define-command-options-and-handler"><span>Step 1, Define Command Options and Handler</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> routerCommandOptions<span class="token operator">:</span> CommandOptions <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token string">&#39;router&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  alias<span class="token operator">:</span> <span class="token string">&#39;r&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&lt;action&gt;&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  desc<span class="token operator">:</span> <span class="token string">&#39;Router utility commands&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">options</span><span class="token operator">:</span> <span class="token punctuation">(</span>yargs<span class="token operator">:</span> IArgv<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> yargs<span class="token punctuation">.</span><span class="token function">positional</span><span class="token punctuation">(</span><span class="token string">&#39;action&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      type<span class="token operator">:</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      choices<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      desc<span class="token operator">:</span> <span class="token string">&#39;Display route definitions&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RouterCommand</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">readonly</span> container<span class="token operator">:</span> IContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">handle</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IncomingEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> action <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;action&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">&#39;list&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token keyword">await</span> Router<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRouterOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dumpRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">private</span> <span class="token function">getRouterOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> RouterOptions <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> routerOptions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>container</span>
<span class="line">      <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">make</span><span class="token generic class-name"><span class="token operator">&lt;</span>IBlueprint<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;blueprint&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>RouterOptions<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;stone.router&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>routerOptions<span class="token punctuation">,</span> dependencyResolver<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="step-2-register-commands-dynamically-via-middleware" tabindex="-1"><a class="header-anchor" href="#step-2-register-commands-dynamically-via-middleware"><span>Step 2, Register Commands Dynamically via Middleware</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> SetRouterCommandsMiddleware <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">  context<span class="token operator">:</span> BlueprintContext<span class="token operator">&lt;</span>IBlueprint<span class="token punctuation">,</span> ClassType<span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">  next<span class="token operator">:</span> NextMiddleware<span class="token operator">&lt;</span>BlueprintContext<span class="token operator">&lt;</span>IBlueprint<span class="token punctuation">,</span> ClassType<span class="token operator">&gt;</span><span class="token punctuation">,</span> IBlueprint<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IBlueprint<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>blueprint<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;stone.adapter.platform&#39;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">NODE_CONSOLE_PLATFORM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    context<span class="token punctuation">.</span>blueprint<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;stone.adapter.commands&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span> options<span class="token operator">:</span> routerCommandOptions<span class="token punctuation">,</span> isClass<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> module<span class="token operator">:</span> RouterCommand <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="step-3-expose-the-middleware-in-your-library-s-blueprint" tabindex="-1"><a class="header-anchor" href="#step-3-expose-the-middleware-in-your-library-s-blueprint"><span>Step 3, Expose the Middleware in Your Library&#39;s Blueprint</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> myLibBlueprint <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  stone<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    blueprint<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      middleware<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span> module<span class="token operator">:</span> SetRouterCommandsMiddleware <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Once your library is used and its blueprint is registered, the command becomes available to the user automatically.</p><p>This mechanism ensures:</p><ul><li>Third-party commands are only registered when relevant (CLI context)</li><li>Registration is dynamic and scoped to the CLI adapter</li><li>No pollution of environments like browser or Lambda</li></ul><p>Stone.js makes sure that commands defined in libraries remain lightweight, discoverable, and executable, all while keeping full control over the CLI namespace.</p><h2 id="best-practices" tabindex="-1"><a class="header-anchor" href="#best-practices"><span>Best Practices</span></a></h2><h4 id="choose-the-right-handler-shape" tabindex="-1"><a class="header-anchor" href="#choose-the-right-handler-shape"><span>Choose the Right Handler Shape</span></a></h4><p>Each handler shape has its own sweet spot. Here’s how to pick the right one:</p><ul><li><p><strong>Class-based</strong> Best for structured CLI tools with decorators, metadata, and clear organization. Recommended when using the Declarative API.</p></li><li><p><strong>Function-based</strong> Ideal for scripts, automation, or quick utilities. Simple and direct, but limited (no dependency injection, no match function).</p></li><li><p><strong>Factory-based</strong> Perfect when you need runtime access to services, containers, or need to inject <code>input</code> and <code>output</code> explicitly. Best choice for advanced CLI applications.</p></li></ul><h4 id="register-explicit-handlers" tabindex="-1"><a class="header-anchor" href="#register-explicit-handlers"><span>Register Explicit Handlers</span></a></h4><p>Avoid defining a <code>handle()</code> method in your main <code>Application</code> class unless you&#39;re using a wildcard pattern.</p><p>Once the CLI adapter is activated, the main handler will be invoked for <strong>any command</strong> that doesn’t match a custom handler. To prevent accidental fallbacks, leave <code>handle()</code> undefined when you&#39;re only using explicit commands.</p><h4 id="use-descriptions-and-aliases" tabindex="-1"><a class="header-anchor" href="#use-descriptions-and-aliases"><span>Use Descriptions and Aliases</span></a></h4><p>Always define:</p><ul><li>A <code>desc</code> so users understand the command’s purpose</li><li>One or more <code>alias</code> values for convenience</li></ul><p>This improves <code>--help</code> output and makes your CLI friendlier to use.</p><h4 id="use-commandinput-when-appropriate" tabindex="-1"><a class="header-anchor" href="#use-commandinput-when-appropriate"><span>Use CommandInput When Appropriate</span></a></h4><p>Don’t overload your command signature with arguments and options. Instead, use <code>CommandInput</code> to collect additional or sensitive data interactively:</p><ul><li>Ask for passwords with <code>secret()</code></li><li>Confirm destructive actions with <code>confirm()</code></li><li>Get long input with <code>editor()</code></li></ul><p>Your users will thank you.</p><h4 id="structure-your-output" tabindex="-1"><a class="header-anchor" href="#structure-your-output"><span>Structure Your Output</span></a></h4><p>Use <code>CommandOutput</code> to:</p><ul><li>Group steps visually with <code>breakLine()</code></li><li>Display lists with <code>table()</code></li><li>Handle longer operations with <code>spin()</code> and <code>progressBar()</code></li><li>Keep things colorful and readable using <code>info()</code>, <code>warn()</code>, <code>error()</code>, and <code>succeed()</code></li></ul><p>Avoid <code>console.log()</code> unless you’re printing raw data for scripting purposes.</p><h4 id="one-command-one-purpose" tabindex="-1"><a class="header-anchor" href="#one-command-one-purpose"><span>One Command, One Purpose</span></a></h4><p>Keep each command focused on a single task. If your command does too many things, break it down into subcommands or split logic into services.</p><h4 id="prefer-declarative-api-for-simplicity" tabindex="-1"><a class="header-anchor" href="#prefer-declarative-api-for-simplicity"><span>Prefer Declarative API for Simplicity</span></a></h4><p>Unless you need manual control, prefer <code>@Command()</code> for its clarity and automatic wiring. If you&#39;re building a library, you can even expose reusable command classes with their own decorators.</p><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>Stone.js provides a unified, flexible, and extensible system for building CLI tools, whether you&#39;re working on a single project or an entire ecosystem of libraries.</p><p>Here’s what you’ve learned:</p><ul><li><p><strong>Stone CLI</strong> is the official command-line tool, installed globally or locally, offering built-in commands like <code>serve</code>, <code>build</code>, and <code>init</code>.</p></li><li><p><strong>Custom Commands</strong> let you turn your application into a full CLI tool by defining handlers that respond to CLI input.</p></li><li><p>You can define commands using <strong>class-based</strong>, <strong>function-based</strong>, or <strong>factory-based</strong> shapes depending on your needs.</p></li><li><p>You can register command handlers via:</p><ul><li><strong>Declarative API</strong> using the <code>@Command()</code> decorator</li><li><strong>Imperative API</strong> using <code>defineCommand(...)</code></li></ul></li><li><p>Stone.js allows you to define your command’s <strong>name</strong>, <strong>alias</strong>, <strong>description</strong>, <strong>arguments</strong>, and <strong>options</strong> using a clean and declarative format.</p></li><li><p>Use the <code>IncomingEvent.get()</code> method to retrieve arguments and options, and the <code>CommandInput</code> class for interactive prompts like <code>ask</code>, <code>secret</code>, <code>choice</code>, etc.</p></li><li><p>Use the <code>CommandOutput</code> class to print messages, render tables, spin loaders, and show progress bars.</p></li><li><p>You can create libraries that expose CLI commands by dynamically registering them through <strong>Blueprint Middleware</strong>, targeting the CLI adapter only when relevant.</p></li></ul><p>Whether you’re building dev tools, setup scripts, admin CLIs, or internal utilities, the Stone.js command system gives you power, clarity, and consistency, across every dimension of the Continuum.</p><p>Welcome to the CLI continuum, where your terminal just got a whole lot smarter.</p>`,135))])}const y=u(k,[["render",h]]),f=JSON.parse('{"path":"/docs/deeper/commands.html","title":"Commands","lang":"en-US","frontmatter":{"title":"Commands","description":"Stone.js offers a powerful and unified command system made of two complementary parts: The Stone CLI, which provides built-in commands like serve, build, or init, and helps auto...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Commands\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-07T20:31:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr. Stone\\"}]}"],["meta",{"property":"og:url","content":"https://stonejs.com/docs/deeper/commands.html"}],["meta",{"property":"og:site_name","content":"Stone.js"}],["meta",{"property":"og:title","content":"Commands"}],["meta",{"property":"og:description","content":"Stone.js offers a powerful and unified command system made of two complementary parts: The Stone CLI, which provides built-in commands like serve, build, or init, and helps auto..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-06-07T20:31:21.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-07T20:31:21.000Z"}]]},"git":{"createdTime":1749328281000,"updatedTime":1749328281000,"contributors":[{"name":"Mr Stone","username":"","email":"pierre.evens16@gmail.com","commits":1}]},"readingTime":{"minutes":13.2,"words":3961},"filePathRelative":"docs/deeper/commands.md","autoDesc":true}');export{y as comp,f as data};
